

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Admin Quick Start &mdash; Singularity container 3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Admin Guide" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Singularity container
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Admin Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-build-dependencies">Install Build Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-go">Install Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-source">Download Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-the-build">Configure the Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-localstatedir">Configuration (<code class="docutils literal notranslate"><span class="pre">localstatedir</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-from-source">Build from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-an-rpm-from-source">Build an RPM from Source</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Singularity container</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Admin Quick Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/sylabs/singularity-admindocs/blob/3.0/admin_quickstart.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="admin-quick-start">
<h1>Admin Quick Start<a class="headerlink" href="#admin-quick-start" title="Permalink to this headline">¶</a></h1>
<p>This document will cover installation and administration points of
<code class="docutils literal notranslate"><span class="pre">Singularity</span></code> on a Linux host. For all other information, see the
<a class="reference external" href="https://www.sylabs.io/guides/3.0/user-guide/">user guide</a>.</p>
<p>For any additional help or support contact the
<a class="reference external" href="https://www.sylabs.io/contact/">Sylabs team</a>.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This section will explain the process of installing <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> from
source and building your own binary packages.</p>
<div class="section" id="install-build-dependencies">
<h3>Install Build Dependencies<a class="headerlink" href="#install-build-dependencies" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> requires several libraries and development tools to be
installed before you can build it from source.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo yum -y update
$ sudo yum -y groupinstall &quot;Development Tools&quot;
$ sudo yum -y install git libseccomp-devel libuuid-devel openssl-devel squashfs-tools wget
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both <code class="docutils literal notranslate"><span class="pre">squashfs-tools</span></code> and <code class="docutils literal notranslate"><span class="pre">libseccomp-devel</span></code> are optional
dependencies but are required for full functionality.</p>
</div>
</div>
<div class="section" id="install-go">
<h3>Install Go<a class="headerlink" href="#install-go" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> is written primarily in Go, and you will need Go &gt;= 1.11
installed to build it from source.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export VERSION=1.11 OS=linux ARCH=amd64
$ wget https://dl.google.com/go/go$VERSION.$OS-$ARCH.tar.gz
$ sudo tar -C /usr/local -xzf go$VERSION.$OS-$ARCH.tar.gz
</pre></div>
</div>
<p>Post installation, you will need to setup your environment for Go.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &#39;export GOPATH=${HOME}/go&#39; &gt;&gt; ~/.bashrc
$ echo &#39;export PATH=/usr/local/go/bin:${PATH}:${GOPATH}/bin&#39; &gt;&gt; ~/.bashrc
$ source ~/.bashrc
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may need to add the path <code class="docutils literal notranslate"><span class="pre">/usr/local/go/bin</span></code> to the
<code class="docutils literal notranslate"><span class="pre">secure_path</span></code> option in your <code class="docutils literal notranslate"><span class="pre">sudoers</span></code> config.</p>
</div>
</div>
<div class="section" id="download-source">
<h3>Download Source<a class="headerlink" href="#download-source" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> source code is available on <code class="docutils literal notranslate"><span class="pre">Github</span></code>. You can either
download a versioned tarball from the
<a class="reference external" href="https://github.com/sylabs/singularity/releases">releases page</a> or
clone our <code class="docutils literal notranslate"><span class="pre">git</span></code> repository.</p>
<p>After you clone the <code class="docutils literal notranslate"><span class="pre">git</span></code> repository, you can optionally <code class="docutils literal notranslate"><span class="pre">checkout</span></code> the
<code class="docutils literal notranslate"><span class="pre">tag</span></code> of a specific version to install (e.g. <code class="docutils literal notranslate"><span class="pre">v3.0.1</span></code>)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mkdir -p $GOPATH/src/github.com/sylabs
$ cd $GOPATH/src/github.com/sylabs
$ git clone https://github.com/sylabs/singularity
$ git tag --list
$ git checkout v3.0.1
</pre></div>
</div>
</div>
<div class="section" id="configure-the-build">
<h3>Configure the Build<a class="headerlink" href="#configure-the-build" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> uses a custom build system. You will configure the build using
the <code class="docutils literal notranslate"><span class="pre">mconfig</span></code> script.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can see all of the options for <code class="docutils literal notranslate"><span class="pre">mconfig</span></code> by using the <code class="docutils literal notranslate"><span class="pre">-h</span></code>
option.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd $GOPATH/src/github.com/sylabs/singularity
$ ./mconfig --prefix=/usr/local --localstatedir=/var
</pre></div>
</div>
</div>
<div class="section" id="configuration-localstatedir">
<h3>Configuration (<code class="docutils literal notranslate"><span class="pre">localstatedir</span></code>)<a class="headerlink" href="#configuration-localstatedir" title="Permalink to this headline">¶</a></h3>
<p>The local state directories used by <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> at runtime will be placed
under the supplied <code class="docutils literal notranslate"><span class="pre">prefix</span></code> option. This will cause issues if that directory
tree is read-only or if it is shared between several hosts or nodes that might
run <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> simultaneously.</p>
<p>In such cases, you should specify the <code class="docutils literal notranslate"><span class="pre">localstatedir</span></code> option. This will
override the <code class="docutils literal notranslate"><span class="pre">prefix</span></code> option, instead placing the local state directories
within the path explicitly provided. Ideally this should be within the local
filesystem, specific to only a single host or node.</p>
<p>In the case of cluster nodes, you will need to create the following
directories on all nodes, with <code class="docutils literal notranslate"><span class="pre">root:root</span></code> ownership and <code class="docutils literal notranslate"><span class="pre">0755</span></code> permissions</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>${localstatedir}/singularity/mnt

${localstatedir}/singularity/mnt/container

${localstatedir}/singularity/mnt/final

${localstatedir}/singularity/mnt/overlay

${localstatedir}/singularity/mnt/session
</pre></div>
</div>
</div>
<div class="section" id="build-from-source">
<h3>Build from Source<a class="headerlink" href="#build-from-source" title="Permalink to this headline">¶</a></h3>
<p>After you configure the build you can finish building <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> from
source.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C builddir
$ sudo make -C builddir install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> must be installed as <code class="docutils literal notranslate"><span class="pre">root</span></code> for full functionality.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Singularity</span></code> must be installed to a file system that allows SUID
programs for full functionality.</p>
</div>
</div>
<div class="section" id="build-an-rpm-from-source">
<h3>Build an RPM from Source<a class="headerlink" href="#build-an-rpm-from-source" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This process was greatly improved in version <code class="docutils literal notranslate"><span class="pre">3.0.1</span></code> and we suggest
you use at least that version if you wish to build RPMs.</p>
</div>
<p>You will use the <code class="docutils literal notranslate"><span class="pre">rpm</span></code> <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> target to build a <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> RPM.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./mconfig
$ make -C builddir rpm
</pre></div>
</div>
<p>You will find the <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> RPMs built in your home directory,
at <code class="docutils literal notranslate"><span class="pre">~/rpmbuild/</span></code>.</p>
<p>If you would like to further customize the <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> installation,
you can instead use the <code class="docutils literal notranslate"><span class="pre">dist</span></code> <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> target and run <code class="docutils literal notranslate"><span class="pre">rpmbuild</span></code>
yourself.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./mconfig
$ make -C builddir dist
$ rpmbuild -tb --define=&quot;_prefix /opt/singularity&quot; singularity-*.tar.gz
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Admin Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Singularity

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'3.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>